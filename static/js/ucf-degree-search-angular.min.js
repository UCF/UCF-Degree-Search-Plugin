function stripDegree(e){return e.replace(" Degree","").replace(" Degrees","").replace("Program","").replace("Programs","")}function capitalize(e){var r=e.split(" "),s=[],i=["a","an","the","at","by","for","in","of","on","to","up","and","as","but","or","nor"];return r.forEach(function(e,t){0===t||t===r.length-1||-1===i.indexOf(e)?s[t]=e.charAt(0).toUpperCase()+e.substr(1).toLowerCase():s[t]=e}),s.join(" ")}var DegreeSearch;!function(r){"use strict";var e,t=function(){try{if(r.URLSearchParams&&"bar"===new r.URLSearchParams("foo=bar").get("foo"))return r.URLSearchParams}catch(e){}return null}(),s=t&&"a=1"===new t({a:1}).toString(),i=t&&"+"===new t("s=%2B").get("s"),a="__URLSearchParams__",o=!t||((n=new t).append("s"," &"),"s=+%26"===n.toString()),n=c.prototype,l=!(!r.Symbol||!r.Symbol.iterator);function c(e){((e=e||"")instanceof URLSearchParams||e instanceof c)&&(e=e.toString()),this[a]=p(e)}function h(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,function(e){return t[e]})}function g(e){return e.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/gi,function(e){return decodeURIComponent(e)})}function u(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return l&&(e[r.Symbol.iterator]=function(){return e}),e}function p(e){var t={};if("object"==typeof e)if(f(e))for(var r=0;r<e.length;r++){var s=e[r];if(!f(s)||2!==s.length)throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements");d(t,s[0],s[1])}else for(var i in e)e.hasOwnProperty(i)&&d(t,i,e[i]);else{0===e.indexOf("?")&&(e=e.slice(1));for(var o=e.split("&"),a=0;a<o.length;a++){var n=o[a],l=n.indexOf("=");-1<l?d(t,g(n.slice(0,l)),g(n.slice(l+1))):n&&d(t,g(n),"")}}return t}function d(e,t,r){r="string"==typeof r?r:null!=r&&"function"==typeof r.toString?r.toString():JSON.stringify(r);m(e,t)?e[t].push(r):e[t]=[r]}function f(e){return e&&"[object Array]"===Object.prototype.toString.call(e)}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t&&s&&i&&o||(n.append=function(e,t){d(this[a],e,t)},n.delete=function(e){delete this[a][e]},n.get=function(e){var t=this[a];return this.has(e)?t[e][0]:null},n.getAll=function(e){var t=this[a];return this.has(e)?t[e].slice(0):[]},n.has=function(e){return m(this[a],e)},n.set=function(e,t){this[a][e]=[""+t]},n.toString=function(){var e,t,r,s,i=this[a],o=[];for(t in i)for(r=h(t),e=0,s=i[t];e<s.length;e++)o.push(r+"="+h(s[e]));return o.join("&")},!!i&&t&&!s&&r.Proxy?(e=new Proxy(t,{construct:function(e,t){return new e(new c(t[0]).toString())}})).toString=Function.prototype.toString.bind(c):e=c,Object.defineProperty(r,"URLSearchParams",{value:e}),(e=r.URLSearchParams.prototype).polyfill=!0,e.forEach=e.forEach||function(r,s){var e=p(this.toString());Object.getOwnPropertyNames(e).forEach(function(t){e[t].forEach(function(e){r.call(s,e,t,this)},this)},this)},e.sort=e.sort||function(){var e,t,r=p(this.toString()),s=[];for(e in r)s.push(e);for(s.sort(),t=0;t<s.length;t++)this.delete(s[t]);for(t=0;t<s.length;t++)for(var i=s[t],o=r[i],a=0;a<o.length;a++)this.append(i,o[a])},e.keys=e.keys||function(){var r=[];return this.forEach(function(e,t){r.push(t)}),u(r)},e.values=e.values||function(){var t=[];return this.forEach(function(e){t.push(e)}),u(t)},e.entries=e.entries||function(){var r=[];return this.forEach(function(e,t){r.push([t,e])}),u(r)},l&&(e[r.Symbol.iterator]=e[r.Symbol.iterator]||e.entries))}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this),"undefined"!=typeof Handlebars&&(Handlebars.registerHelper("stripDegree",stripDegree),Handlebars.registerHelper("capitalize",capitalize)),function(e){var t;function r(e,t){this.http=e,this.location=t,this.apiUrl=UCF_DEGREE_SEARCH_ANGULAR.remote_path,this.limit=UCF_DEGREE_SEARCH_ANGULAR.limit}t=e.Services||(e.Services={}),r.prototype.getDegreeResults=function(e,t,r,s){t={search:e,colleges:t.college,program_types:t.programType,page:t.page||1,limit:t.limit||this.limit};this.http.get(this.apiUrl+"/degrees",{params:t}).then(function(e){r(e)},function(e){s(e)})},r.prototype.getProgramTypes=function(t,r){this.http.get(this.apiUrl+"/program-types").then(function(e){t(e)},function(e){r(e)})},r.prototype.getProgramTypesCounts=function(e,t,r,s){t={search:e,colleges:t};t.colleges="all"===t.colleges?"":t.colleges,this.http.get(this.apiUrl+"/program-types/counts",{params:t}).then(function(e){r(e)},function(e){s(e)})},r.prototype.getColleges=function(t,r){this.http.get(this.apiUrl+"/colleges").then(function(e){t(e)},function(e){r(e)})},r.prototype.getCollegesCounts=function(e,t,r,s){t={search:e,program_types:t};t.program_types="all"===t.program_types?"":t.program_types,this.http.get(this.apiUrl+"/colleges/counts",{params:t}).then(function(e){r(e)},function(e){s(e)})},r.$inject=["$http","$location"],e=r,t.DegreeService=e}(DegreeSearch=DegreeSearch||{}),function(e){var t;function r(e,t,r){var s=this;this.scope=e,this.location=t,this.degreeService=r,this.pages=new Array,this.routeRegExps={college:null,program:null,search:null},this.hasFilters=!1,this.updateHeading=UCF_DEGREE_SEARCH_ANGULAR.update_heading,this.updateTitle=UCF_DEGREE_SEARCH_ANGULAR.update_title,setTimeout(function(){s.init()},0)}t=e.Controllers||(e.Controllers={}),r.prototype.init=function(){var r=this;this.registerRoute(),this.setDefaults(),this.parsePath(),this.updateHeading&&(this.$heading=$("h1")),this.scope.$watch("mainCtl.searchQuery",function(e,t){r.handleInput(e,t)}),this.getSearchResults()},r.prototype.getSearchResults=function(){var t=this;this.totalResults=null;var e="all"===this.selectedProgramType?"":this.selectedProgramType,r="all"===this.selectedCollege?"":this.selectedCollege;this.searchQuery||this.selectedProgramType||this.selectedCollege?this.hasFilters=!0:this.hasFilters=!1,this.degreeService.getDegreeResults(this.searchQuery,{college:r,page:this.currentPage,programType:e},function(e){t.successHandler(e)},function(e){t.errorHandler(e)})},r.prototype.successHandler=function(e){this.results=e.data,this.totalResults=this.results.totalPosts,this.currentPage=this.results.currentPage,this.totalPages=this.results.totalPages,this.startIndex=this.results.startIndex,this.endIndex=this.results.endIndex,this.buildLocation(),this.buildResultMessage(),this.pagination(),this.googleDataLayerUpdate(),this.updateHeading&&this.setHeading(),this.updateTitle&&this.setTitle()},r.prototype.errorHandler=function(e){this.results={}},r.prototype.buildResultMessage=function(){0===this.totalResults?this.resultMessage="":(this.resultMessage="Showing "+this.startIndex+" through "+this.endIndex+" of "+this.totalResults+" results",this.searchQuery&&""!==this.searchQuery&&(this.resultMessage+=" for "+this.searchQuery),this.selectedProgramType&&"all"!==this.selectedProgramType&&(this.resultMessage+=" in "+this.selectedProgramTypeDisplay),this.selectedCollege&&"all"!==this.selectedCollege&&(this.resultMessage+=" at the "+this.selectedCollegeDisplay),this.resultMessage+=" at UCF.")},r.prototype.setHeading=function(){var e=UCF_DEGREE_SEARCH_ANGULAR.heading_template,e=Handlebars.compile(e);this.$heading.html(e(this))},r.prototype.setTitle=function(){var e=UCF_DEGREE_SEARCH_ANGULAR.title_template,e=Handlebars.compile(e);document.title=e(this)},r.prototype.handleInput=function(e,t){e!==t&&(this.searchQuery=e,this.currentPage=1,this.buildLocation(),this.getSearchResults())},r.prototype.previousPage=function(){this.currentPage--,this.currentPage<1?this.currentPage=1:this.getSearchResults()},r.prototype.nextPage=function(){this.currentPage++,this.currentPage<=this.totalPages?this.getSearchResults():this.currentPage--},r.prototype.goToPage=function(e){1<=e&&e<=this.totalPages&&(this.currentPage=e,this.getSearchResults())},r.prototype.registerRoute=function(){this.routeRegExps.search=new RegExp("/search/([\\w\\s]*)/?")},r.prototype.setDefaults=function(){var t=this;UCF_DEGREE_SEARCH_ANGULAR.default_program_type&&(this.selectedProgramType=UCF_DEGREE_SEARCH_ANGULAR.default_program_type),UCF_DEGREE_SEARCH_ANGULAR.default_college&&(this.selectedCollege=UCF_DEGREE_SEARCH_ANGULAR.default_college),UCF_DEGREE_SEARCH_ANGULAR.enabled_routes?(this.enabledRoutes={college:!1,program:!1,search:!1},UCF_DEGREE_SEARCH_ANGULAR.enabled_routes.forEach(function(e){t.enabledRoutes[e]=!0})):this.enabledRoutes={college:!0,program:!0,search:!0}},r.prototype.parsePath=function(){var e,r,s,t,i=this,o=new URLSearchParams(location.search),a=this.location.path();this.enabledRoutes.college&&this.routeRegExps.college&&((t=this.routeRegExps.college.exec(a))?this.selectedCollege=t[1]:o.has("college[0]")?this.selectedCollege=o.get("college[0]"):o.has("colleges")&&(this.selectedCollege=o.get("colleges")),!this.selectedCollege||(e=UCF_DEGREE_SEARCH_ANGULAR.colleges.find(function(e){return e.slug==i.selectedCollege}))&&(this.selectedCollegeDisplay=e.fullname)),this.enabledRoutes.program&&this.routeRegExps.program&&((t=this.routeRegExps.program.exec(a))?this.selectedProgramType=t[1]:o.has("program-type[0]")?this.selectedProgramType=o.get("program-type[0]"):o.has("program_types")&&(this.selectedProgramType=o.get("program_types")),this.selectedProgramType&&(r=UCF_DEGREE_SEARCH_ANGULAR.program_types.find(function(e){return e.slug===i.selectedProgramType}),s=null,r?s=r:UCF_DEGREE_SEARCH_ANGULAR.program_types.forEach(function(e){var t=e.children.find(function(e){return e.slug===i.selectedProgramType});t&&(r=t,s=e)}),this.selectedParentProgramType=s.slug,this.selectedProgramTypeDisplay=r.name),this.location.search({})),this.enabledRoutes.search&&this.routeRegExps.search&&((t=this.routeRegExps.search.exec(a))?this.searchQuery=t[1]:o.has("search")&&(this.searchQuery=o.get("search"))),this.location.search({})},r.prototype.buildLocation=function(){var e="/";this.selectedCollege&&this.enabledRoutes.college&&"all"!==this.selectedCollege&&(e+="college/"+this.selectedCollege+"/"),this.selectedProgramType&&this.enabledRoutes.program&&"all"!==this.selectedProgramType&&(e+=this.selectedProgramType+"/"),this.searchQuery&&this.enabledRoutes.search&&(e+="search/"+this.searchQuery+"/"),this.location.path(e)},r.prototype.pagination=function(){var e=$(document).innerWidth()<768?2:4,t=this.currentPage-e<1?1:this.currentPage-e,r=this.currentPage+e>this.totalPages?this.totalPages:this.currentPage+e;this.pages=new Array;for(var s=t;s<=r;s++)this.pages.push(s)},r.prototype.googleDataLayerUpdate=function(){"undefined"!=typeof dataLayer&&dataLayer.push({event:"degreeSearchFilterChange",degreeSearchTerm:this.searchQuery,degreeSearchProgramTypes:this.selectedProgramType,degreeSearchCollege:this.selectedCollege})},r.$inject=["$scope","$location","DegreeService"],e=r,t.MainController=e}(DegreeSearch=DegreeSearch||{}),function(e){var t;function r(e,t){this.scope=e,this.degreeService=t,this.mainCtl=this.scope.$parent.mainCtl,this.programTypes=new Array}t=e.Controllers||(e.Controllers={}),r.prototype.init=function(){UCF_DEGREE_SEARCH_ANGULAR.program_types&&(this.programTypes=UCF_DEGREE_SEARCH_ANGULAR.program_types),this.registerRoutes()},r.prototype.registerRoutes=function(){var t=new Array;this.programTypes.forEach(function(e){t.push(e.slug),0<e.children.length&&e.children.forEach(function(e){t.push(e.slug)})}),this.mainCtl.routeRegExps.program=new RegExp("/("+t.join("|")+")/?")},r.prototype.onClear=function(){this.mainCtl.selectedProgramType="all",this.mainCtl.selectedProgramTypeDisplay="",this.mainCtl.selectedParentProgramType="",this.mainCtl.currentPage=1,this.mainCtl.getSearchResults()},r.prototype.onSelected=function(r){var s=this.programTypes.find(function(e){return e.slug===r}),i=null;s?i=s:this.programTypes.forEach(function(e){var t=e.children.find(function(e){return e.slug===r});t&&(s=t,i=e)}),this.mainCtl.selectedProgramType=s.slug,this.mainCtl.selectedProgramTypeDisplay=s.name,this.mainCtl.selectedParentProgramType=i.slug,this.mainCtl.currentPage=1,this.mainCtl.getSearchResults()},r.$inject=["$scope","DegreeService"],e=r,t.ProgramController=e}(DegreeSearch=DegreeSearch||{}),function(e){var t;function r(e,t){this.scope=e,this.degreeService=t,this.mainCtl=this.scope.$parent.mainCtl,this.colleges=new Array}t=e.Controllers||(e.Controllers={}),r.prototype.init=function(){UCF_DEGREE_SEARCH_ANGULAR.colleges&&(this.colleges=UCF_DEGREE_SEARCH_ANGULAR.colleges),this.registerRoutes()},r.prototype.registerRoutes=function(){this.mainCtl.routeRegExps.college=new RegExp("/college/([a-zA-Z-_]*)/?")},r.prototype.onClear=function(){this.mainCtl.selectedCollege="all",this.mainCtl.selectedCollegeDisplay="",this.mainCtl.currentPage=1,this.mainCtl.getSearchResults()},r.prototype.onSelected=function(t){var e=this.colleges.find(function(e){return e.slug==t});this.mainCtl.selectedCollege=e.slug,this.mainCtl.selectedCollegeDisplay=e.fullname,this.mainCtl.currentPage=1,this.mainCtl.getSearchResults()},r.$inject=["$scope","DegreeService"],e=r,t.CollegeController=e}(DegreeSearch=DegreeSearch||{}),function(e){(e=e.Directives||(e.Directives={})).searchFormDirective=function(){return{restrict:"E",replace:!0,template:function(e,t){var r=UCF_DEGREE_SEARCH_ANGULAR.search_form_template;return t.placeholder&&(r=r.replace("{{atts.placeholder}}",t.placeholder)),r}}},e.searchResultsDirective=function(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.search_results_template}},e.programTypesDirective=function(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.program_types_template}},e.collegesDirective=function(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.colleges_template}},e.paginationDirective=function(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.pagination_template}},e.resultCountDirective=function(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.result_count_template}},e.loadingDirective=function(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.loading_template}},e.noResultsDirective=function(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.no_results_template}}}(DegreeSearch=DegreeSearch||{}),function(e){(e.Filters||(e.Filters={})).convertEncoding=function(){return function(e){return $("<span>").html(e).text()}}}(DegreeSearch=DegreeSearch||{});var app=angular.module("DegreeSearchApp",[]).config(["$locationProvider",function(e){e.html5Mode(!0)}]);angular.module("DegreeSearchApp").controller("MainController",DegreeSearch.Controllers.MainController),angular.module("DegreeSearchApp").controller("ProgramController",DegreeSearch.Controllers.ProgramController),angular.module("DegreeSearchApp").controller("CollegeController",DegreeSearch.Controllers.CollegeController),angular.module("DegreeSearchApp").service("DegreeService",DegreeSearch.Services.DegreeService),angular.module("DegreeSearchApp").directive("searchForm",DegreeSearch.Directives.searchFormDirective),angular.module("DegreeSearchApp").directive("searchResults",DegreeSearch.Directives.searchResultsDirective),angular.module("DegreeSearchApp").directive("programTypeFilters",DegreeSearch.Directives.programTypesDirective),angular.module("DegreeSearchApp").directive("collegeFilters",DegreeSearch.Directives.collegesDirective),angular.module("DegreeSearchApp").directive("pagination",DegreeSearch.Directives.paginationDirective),angular.module("DegreeSearchApp").directive("resultCount",DegreeSearch.Directives.resultCountDirective),angular.module("DegreeSearchApp").directive("loading",DegreeSearch.Directives.loadingDirective),angular.module("DegreeSearchApp").directive("noResults",DegreeSearch.Directives.noResultsDirective),angular.module("DegreeSearchApp").filter("convertEncoding",DegreeSearch.Filters.convertEncoding);
//# sourceMappingURL=ucf-degree-search-angular.min.js.map
