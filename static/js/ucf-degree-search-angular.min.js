var DegreeSearch;!function(e){!function(e){function t(){return function(e,t){t=t;for(var r=0;r<t;r++)e.push(r);return e}}e.RangeFilter=t}(e.Filters||(e.Filters={}));e.Filters}(DegreeSearch||(DegreeSearch={}));var DegreeSearch;!function(e){!function(e){var t=function(){function e(e,t){this.http=e,this.location=t,this.apiUrl=UCF_DEGREE_SEARCH_ANGULAR.remote_path}return e.prototype.GetDegreeResults=function(e,t,r,a){var i={search:e,program_types:t.programType,page:t.page?t.page:1};this.http.get(this.apiUrl,{params:i}).then(function(e){r(e)},function(e){a(e)})},e.prototype.GetProgramTypes=function(e,t){this.http.get(this.apiUrl+"/program-types").then(function(t){e(t)},function(e){t(e)})},e.$inject=["$http","$location"],e}();e.DegreeService=t}(e.Services||(e.Services={}));e.Services}(DegreeSearch||(DegreeSearch={}));var DegreeSearch;!function(e){!function(e){var t=function(){function e(e,t,r){var a=this;this.scope=e,this.location=t,this.degreeService=r,this.degreeService.GetProgramTypes(function(e){a.programTypes=e.data,a.BuildRegExps(),a.SetDefaults(),a.ParsePath(),a.scope.$watch("mainCtl.searchQuery",function(e){a.HandleInput(e)})},function(e){a.programTypes=Array()})}return e.prototype.GetSearchResults=function(){var e=this;this.totalResults=null;var t="all"===this.selectedProgramType?"":this.selectedProgramType;this.degreeService.GetDegreeResults(this.searchQuery,{programType:t,page:this.currentPage},function(t){e.SuccessHandler(t)},function(t){e.ErrorHandler(t)})},e.prototype.SuccessHandler=function(e){this.results=e.data,this.totalResults=this.results.totalPosts,this.currentPage=this.results.currentPage,this.totalPages=this.results.totalPages,this.startIndex=this.results.startIndex,this.endIndex=this.results.endIndex},e.prototype.ErrorHandler=function(e){},e.prototype.HandleInput=function(e){this.searchQuery=e,this.currentPage=1,this.BuildLocation(),this.GetSearchResults()},e.prototype.PreviousPage=function(){this.currentPage--,this.currentPage<1?this.currentPage=1:this.GetSearchResults()},e.prototype.NextPage=function(){this.currentPage++,this.currentPage<=this.totalPages?this.GetSearchResults():this.currentPage--},e.prototype.GoToPage=function(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.GetSearchResults())},e.prototype.UpdateFilters=function(e){this.selectedProgramType=e,this.currentPage=1,this.BuildLocation(),this.GetSearchResults()},e.prototype.BuildRegExps=function(){var e=new Array;this.programTypes.forEach(function(t){e.push(t.slug)}),this.routeRegExps={college:new RegExp("/college/([a-zA-Z-_]*)/?"),program:new RegExp("/("+e.join("|")+")/?"),search:new RegExp("/search/(.*)/?")}},e.prototype.SetDefaults=function(){var e=this;UCF_DEGREE_SEARCH_ANGULAR.default_program_type&&(this.selectedProgramType=UCF_DEGREE_SEARCH_ANGULAR.default_program_type),UCF_DEGREE_SEARCH_ANGULAR.default_college&&(this.selectedCollege=UCF_DEGREE_SEARCH_ANGULAR.default_college),UCF_DEGREE_SEARCH_ANGULAR.enabled_routes?(this.enabledRoutes={college:!1,program:!1,search:!1},UCF_DEGREE_SEARCH_ANGULAR.enabled_routes.forEach(function(t){e.enabledRoutes[t]=!0})):this.enabledRoutes={college:!0,program:!0,search:!0}},e.prototype.ParsePath=function(){var e=this.location.path();if(this.enabledRoutes.college){var t=this.routeRegExps.college.exec(e);t&&(this.selectedCollege=t[1])}if(this.enabledRoutes.program){var t=this.routeRegExps.program.exec(e);t&&(this.selectedProgramType=t[1])}if(this.enabledRoutes.search){var t=this.routeRegExps.search.exec(e);t&&(this.searchQuery=t[1])}},e.prototype.BuildLocation=function(){var e="/";this.selectedCollege&&this.enabledRoutes.college&&(e+="college/"+this.selectedCollege+"/"),"any"!==this.selectedProgramType&&this.enabledRoutes.program&&(e+=this.selectedProgramType+"/"),this.searchQuery&&this.enabledRoutes.search&&(e+="search/"+this.searchQuery+"/")},e.$inject=["$scope","$location","DegreeService"],e}();e.MainController=t}(e.Controllers||(e.Controllers={}));e.Controllers}(DegreeSearch||(DegreeSearch={}));var DegreeSearch;!function(e){!function(e){function t(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.search_form_template}}function r(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.search_results_template}}function a(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.program_types_template}}function i(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.pagination_template}}function s(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.result_count_template}}function c(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.loading_template}}function o(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.no_results_template}}e.SearchFormDirective=t,e.SearchResultsDirective=r,e.ProgramTypesDirective=a,e.PaginationDirective=i,e.ResultCountDirective=s,e.LoadingDirective=c,e.NoResultsDirective=o}(e.Directives||(e.Directives={}));e.Directives}(DegreeSearch||(DegreeSearch={})),angular.module("DegreeSearchApp",[]),angular.module("DegreeSearchApp").controller("MainController",DegreeSearch.Controllers.MainController),angular.module("DegreeSearchApp").service("DegreeService",DegreeSearch.Services.DegreeService),angular.module("DegreeSearchApp").directive("searchForm",DegreeSearch.Directives.SearchFormDirective),angular.module("DegreeSearchApp").directive("searchResults",DegreeSearch.Directives.SearchResultsDirective),angular.module("DegreeSearchApp").directive("programTypeFilters",DegreeSearch.Directives.ProgramTypesDirective),angular.module("DegreeSearchApp").directive("pagination",DegreeSearch.Directives.PaginationDirective),angular.module("DegreeSearchApp").directive("resultCount",DegreeSearch.Directives.ResultCountDirective),angular.module("DegreeSearchApp").directive("loading",DegreeSearch.Directives.LoadingDirective),angular.module("DegreeSearchApp").directive("noResults",DegreeSearch.Directives.NoResultsDirective),angular.module("DegreeSearchApp").filter("range",DegreeSearch.Filters.RangeFilter);
//# sourceMappingURL=ucf-degree-search-angular.min.js.map
