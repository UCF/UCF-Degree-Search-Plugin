function stripDegree(e){return e.replace(" Degree","").replace(" Degrees","").replace("Program","").replace("Programs","")}function capitalize(e){var t=e.split(" "),r=[],s=["a","an","the","at","by","for","in","of","on","to","up","and","as","but","or","nor"];return t.forEach(function(e,i){0===i||i===t.length-1?r[i]=e.charAt(0).toUpperCase()+e.substr(1).toLowerCase():s.indexOf(e)===-1?r[i]=e.charAt(0).toUpperCase()+e.substr(1).toLowerCase():r[i]=e}),r.join(" ")}!function(e){"use strict";function t(e){e=e||"",(e instanceof URLSearchParams||e instanceof t)&&(e=e.toString()),this[g]=a(e)}function r(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,function(e){return t[e]})}function s(e){return e.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/gi,function(e){return decodeURIComponent(e)})}function i(t){var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return d&&(r[e.Symbol.iterator]=function(){return r}),r}function a(e){var t={};if("object"==typeof e)if(n(e))for(var r=0;r<e.length;r++){var i=e[r];if(!n(i)||2!==i.length)throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements");o(t,i[0],i[1])}else for(var a in e)e.hasOwnProperty(a)&&o(t,a,e[a]);else{0===e.indexOf("?")&&(e=e.slice(1));for(var l=e.split("&"),c=0;c<l.length;c++){var h=l[c],u=h.indexOf("=");-1<u?o(t,s(h.slice(0,u)),s(h.slice(u+1))):h&&o(t,s(h),"")}}return t}function o(e,t,r){var s="string"==typeof r?r:null!==r&&void 0!==r&&"function"==typeof r.toString?r.toString():JSON.stringify(r);l(e,t)?e[t].push(s):e[t]=[s]}function n(e){return!!e&&"[object Array]"===Object.prototype.toString.call(e)}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var c=function(){try{if(e.URLSearchParams&&"bar"===new e.URLSearchParams("foo=bar").get("foo"))return e.URLSearchParams}catch(t){}return null}(),h=c&&"a=1"===new c({a:1}).toString(),u=c&&"+"===new c("s=%2B").get("s"),g="__URLSearchParams__",p=!c||function(){var e=new c;return e.append("s"," &"),"s=+%26"===e.toString()}(),f=t.prototype,d=!(!e.Symbol||!e.Symbol.iterator);if(!(c&&h&&u&&p)){f.append=function(e,t){o(this[g],e,t)},f["delete"]=function(e){delete this[g][e]},f.get=function(e){var t=this[g];return this.has(e)?t[e][0]:null},f.getAll=function(e){var t=this[g];return this.has(e)?t[e].slice(0):[]},f.has=function(e){return l(this[g],e)},f.set=function(e,t){this[g][e]=[""+t]},f.toString=function(){var e,t,s,i,a=this[g],o=[];for(t in a)for(s=r(t),e=0,i=a[t];e<i.length;e++)o.push(s+"="+r(i[e]));return o.join("&")};var m=!u,y=!m&&c&&!h&&e.Proxy;Object.defineProperty(e,"URLSearchParams",{value:y?new Proxy(c,{construct:function(e,r){return new e(new t(r[0]).toString())}}):t});var E=e.URLSearchParams.prototype;E.polyfill=!0,E.forEach=E.forEach||function(e,t){var r=a(this.toString());Object.getOwnPropertyNames(r).forEach(function(s){r[s].forEach(function(r){e.call(t,r,s,this)},this)},this)},E.sort=E.sort||function(){var e,t,r,s=a(this.toString()),i=[];for(e in s)i.push(e);for(i.sort(),t=0;t<i.length;t++)this["delete"](i[t]);for(t=0;t<i.length;t++){var o=i[t],n=s[o];for(r=0;r<n.length;r++)this.append(o,n[r])}},E.keys=E.keys||function(){var e=[];return this.forEach(function(t,r){e.push(r)}),i(e)},E.values=E.values||function(){var e=[];return this.forEach(function(t){e.push(t)}),i(e)},E.entries=E.entries||function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),i(e)},d&&(E[e.Symbol.iterator]=E[e.Symbol.iterator]||E.entries)}}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this),"undefined"!=typeof Handlebars&&(Handlebars.registerHelper("stripDegree",stripDegree),Handlebars.registerHelper("capitalize",capitalize));var DegreeSearch;!function(e){!function(e){var t=function(){function e(e,t){this.http=e,this.location=t,this.apiUrl=UCF_DEGREE_SEARCH_ANGULAR.remote_path,this.limit=UCF_DEGREE_SEARCH_ANGULAR.limit}return e.prototype.getDegreeResults=function(e,t,r,s){var i={search:e,colleges:t.college,program_types:t.programType,page:t.page?t.page:1,limit:t.limit?t.limit:this.limit};this.http.get(this.apiUrl+"/degrees",{params:i}).then(function(e){r(e)},function(e){s(e)})},e.prototype.getProgramTypes=function(e,t){this.http.get(this.apiUrl+"/program-types").then(function(t){e(t)},function(e){t(e)})},e.prototype.getProgramTypesCounts=function(e,t,r,s){var i={search:e,colleges:t};i.colleges="all"===i.colleges?"":i.colleges,this.http.get(this.apiUrl+"/program-types/counts",{params:i}).then(function(e){r(e)},function(e){s(e)})},e.prototype.getColleges=function(e,t){this.http.get(this.apiUrl+"/colleges").then(function(t){e(t)},function(e){t(e)})},e.prototype.getCollegesCounts=function(e,t,r,s){var i={search:e,program_types:t};i.program_types="all"===i.program_types?"":i.program_types,this.http.get(this.apiUrl+"/colleges/counts",{params:i}).then(function(e){r(e)},function(e){s(e)})},e.$inject=["$http","$location"],e}();e.DegreeService=t}(e.Services||(e.Services={}));e.Services}(DegreeSearch||(DegreeSearch={}));var DegreeSearch;!function(e){!function(e){var t=function(){function e(e,t,r){var s=this;this.scope=e,this.location=t,this.degreeService=r,this.pages=new Array,this.routeRegExps={college:null,program:null,search:null},this.hasFilters=!1,this.updateHeading=UCF_DEGREE_SEARCH_ANGULAR.update_heading,this.updateTitle=UCF_DEGREE_SEARCH_ANGULAR.update_title,setTimeout(function(){s.init()},0)}return e.prototype.init=function(){var e=this;this.registerRoute(),this.setDefaults(),this.parsePath(),this.updateHeading&&(this.$heading=$("h1")),this.scope.$watch("mainCtl.searchQuery",function(t,r){e.handleInput(t,r)}),this.getSearchResults()},e.prototype.getSearchResults=function(){var e=this;this.totalResults=null;var t="all"===this.selectedProgramType?"":this.selectedProgramType,r="all"===this.selectedCollege?"":this.selectedCollege;this.searchQuery||this.selectedProgramType||this.selectedCollege?this.hasFilters=!0:this.hasFilters=!1,this.degreeService.getDegreeResults(this.searchQuery,{college:r,page:this.currentPage,programType:t},function(t){e.successHandler(t)},function(t){e.errorHandler(t)})},e.prototype.successHandler=function(e){this.results=e.data,this.totalResults=this.results.totalPosts,this.currentPage=this.results.currentPage,this.totalPages=this.results.totalPages,this.startIndex=this.results.startIndex,this.endIndex=this.results.endIndex,this.buildLocation(),this.buildResultMessage(),this.pagination(),this.googleDataLayerUpdate(),this.updateHeading&&this.setHeading(),this.updateTitle&&this.setTitle()},e.prototype.errorHandler=function(e){this.results={}},e.prototype.buildResultMessage=function(){0===this.totalResults?(this.resultMessage="",this.setWpSpeak("No results found for "+this.searchQuery)):(this.resultMessage="Showing "+this.startIndex+" through "+this.endIndex+" of "+this.totalResults+" results",this.searchQuery&&""!==this.searchQuery&&(this.resultMessage+=" for "+this.searchQuery),this.selectedProgramType&&"all"!==this.selectedProgramType&&(this.resultMessage+=" in "+this.selectedProgramTypeDisplay),this.selectedCollege&&"all"!==this.selectedCollege&&(this.resultMessage+=" at the "+this.selectedCollegeDisplay),this.resultMessage+=" at UCF.",this.setWpSpeak(this.resultMessage))},e.prototype.setWpSpeak=function(e){wp.a11y.speak(e)},e.prototype.setHeading=function(){var e=UCF_DEGREE_SEARCH_ANGULAR.heading_template,t=Handlebars.compile(e);this.$heading.html(t(this))},e.prototype.setTitle=function(){var e=UCF_DEGREE_SEARCH_ANGULAR.title_template,t=Handlebars.compile(e);document.title=t(this)},e.prototype.handleInput=function(e,t){e!==t&&(this.searchQuery=e,this.currentPage=1,this.buildLocation(),this.getSearchResults())},e.prototype.previousPage=function(){this.currentPage--,this.currentPage<1?this.currentPage=1:this.getSearchResults()},e.prototype.nextPage=function(){this.currentPage++,this.currentPage<=this.totalPages?this.getSearchResults():this.currentPage--},e.prototype.goToPage=function(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.getSearchResults())},e.prototype.registerRoute=function(){this.routeRegExps.search=new RegExp("/search/([\\w\\s]*)/?")},e.prototype.setDefaults=function(){var e=this;UCF_DEGREE_SEARCH_ANGULAR.default_program_type&&(this.selectedProgramType=UCF_DEGREE_SEARCH_ANGULAR.default_program_type),UCF_DEGREE_SEARCH_ANGULAR.default_college&&(this.selectedCollege=UCF_DEGREE_SEARCH_ANGULAR.default_college),UCF_DEGREE_SEARCH_ANGULAR.enabled_routes?(this.enabledRoutes={college:!1,program:!1,search:!1},UCF_DEGREE_SEARCH_ANGULAR.enabled_routes.forEach(function(t){e.enabledRoutes[t]=!0})):this.enabledRoutes={college:!0,program:!0,search:!0}},e.prototype.parsePath=function(){var e=this,t=new URLSearchParams(location.search),r=this.location.path();if(this.enabledRoutes.college&&this.routeRegExps.college){var s=this.routeRegExps.college.exec(r);if(s?this.selectedCollege=s[1]:t.has("college[0]")?this.selectedCollege=t.get("college[0]"):t.has("colleges")&&(this.selectedCollege=t.get("colleges")),this.selectedCollege){var i=UCF_DEGREE_SEARCH_ANGULAR.colleges.find(function(t){return t.slug==e.selectedCollege});i&&(this.selectedCollegeDisplay=i.fullname)}}if(this.enabledRoutes.program&&this.routeRegExps.program){var s=this.routeRegExps.program.exec(r);if(s?this.selectedProgramType=s[1]:t.has("program-type[0]")?this.selectedProgramType=t.get("program-type[0]"):t.has("program_types")&&(this.selectedProgramType=t.get("program_types")),this.selectedProgramType){var a=UCF_DEGREE_SEARCH_ANGULAR.program_types.find(function(t){return t.slug===e.selectedProgramType}),o=null;a?o=a:UCF_DEGREE_SEARCH_ANGULAR.program_types.forEach(function(t){var r=t.children.find(function(t){return t.slug===e.selectedProgramType});r&&(a=r,o=t)}),this.selectedParentProgramType=o.slug,this.selectedProgramTypeDisplay=a.name}this.location.search({})}if(this.enabledRoutes.search&&this.routeRegExps.search){var s=this.routeRegExps.search.exec(r);s?this.searchQuery=s[1]:t.has("search")&&(this.searchQuery=t.get("search"))}this.location.search({})},e.prototype.buildLocation=function(){var e="/";this.selectedCollege&&this.enabledRoutes.college&&"all"!==this.selectedCollege&&(e+="college/"+this.selectedCollege+"/"),this.selectedProgramType&&this.enabledRoutes.program&&"all"!==this.selectedProgramType&&(e+=this.selectedProgramType+"/"),this.searchQuery&&this.enabledRoutes.search&&(e+="search/"+this.searchQuery+"/"),this.location.path(e)},e.prototype.pagination=function(){var e=$(document).innerWidth()<768?2:4,t=this.currentPage-e<1?1:this.currentPage-e,r=this.currentPage+e>this.totalPages?this.totalPages:this.currentPage+e;this.pages=new Array;for(var s=t;s<=r;s++)this.pages.push(s)},e.prototype.googleDataLayerUpdate=function(){"undefined"!=typeof dataLayer&&dataLayer.push({event:"degreeSearchFilterChange",degreeSearchTerm:this.searchQuery,degreeSearchProgramTypes:this.selectedProgramType,degreeSearchCollege:this.selectedCollege})},e.$inject=["$scope","$location","DegreeService"],e}();e.MainController=t}(e.Controllers||(e.Controllers={}));e.Controllers}(DegreeSearch||(DegreeSearch={}));var DegreeSearch;!function(e){!function(e){var t=function(){function e(e,t){this.scope=e,this.degreeService=t,this.mainCtl=this.scope.$parent.mainCtl,this.programTypes=new Array}return e.prototype.init=function(){UCF_DEGREE_SEARCH_ANGULAR.program_types&&(this.programTypes=UCF_DEGREE_SEARCH_ANGULAR.program_types),this.registerRoutes()},e.prototype.registerRoutes=function(){var e=new Array;this.programTypes.forEach(function(t){e.push(t.slug),t.children.length>0&&t.children.forEach(function(t){e.push(t.slug)})}),this.mainCtl.routeRegExps.program=new RegExp("/("+e.join("|")+")/?")},e.prototype.onClear=function(){this.mainCtl.selectedProgramType="all",this.mainCtl.selectedProgramTypeDisplay="",this.mainCtl.selectedParentProgramType="",this.mainCtl.currentPage=1,this.mainCtl.getSearchResults()},e.prototype.onSelected=function(e){var t=this.programTypes.find(function(t){return t.slug===e}),r=null;t?r=t:this.programTypes.forEach(function(s){var i=s.children.find(function(t){return t.slug===e});i&&(t=i,r=s)}),this.mainCtl.selectedProgramType=t.slug,this.mainCtl.selectedProgramTypeDisplay=t.name,this.mainCtl.selectedParentProgramType=r.slug,this.mainCtl.currentPage=1,this.mainCtl.getSearchResults()},e.$inject=["$scope","DegreeService"],e}();e.ProgramController=t}(e.Controllers||(e.Controllers={}));e.Controllers}(DegreeSearch||(DegreeSearch={}));var DegreeSearch;!function(e){!function(e){var t=function(){function e(e,t){this.scope=e,this.degreeService=t,this.mainCtl=this.scope.$parent.mainCtl,this.colleges=new Array}return e.prototype.init=function(){UCF_DEGREE_SEARCH_ANGULAR.colleges&&(this.colleges=UCF_DEGREE_SEARCH_ANGULAR.colleges),this.registerRoutes()},e.prototype.registerRoutes=function(){this.mainCtl.routeRegExps.college=new RegExp("/college/([a-zA-Z-_]*)/?")},e.prototype.onClear=function(){this.mainCtl.selectedCollege="all",this.mainCtl.selectedCollegeDisplay="",this.mainCtl.currentPage=1,this.mainCtl.getSearchResults()},e.prototype.onSelected=function(e){var t=this.colleges.find(function(t){return t.slug==e});this.mainCtl.selectedCollege=t.slug,this.mainCtl.selectedCollegeDisplay=t.fullname,this.mainCtl.currentPage=1,this.mainCtl.getSearchResults()},e.$inject=["$scope","DegreeService"],e}();e.CollegeController=t}(e.Controllers||(e.Controllers={}));e.Controllers}(DegreeSearch||(DegreeSearch={}));var DegreeSearch;!function(e){!function(e){function t(){return{restrict:"E",replace:!0,template:function(e,t){var r=UCF_DEGREE_SEARCH_ANGULAR.search_form_template;return t.placeholder&&(r=r.replace("{{atts.placeholder}}",t.placeholder)),r}}}function r(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.search_results_template}}function s(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.program_types_template}}function i(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.colleges_template}}function a(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.pagination_template}}function o(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.result_count_template}}function n(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.loading_template}}function l(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.no_results_template}}e.searchFormDirective=t,e.searchResultsDirective=r,e.programTypesDirective=s,e.collegesDirective=i,e.paginationDirective=a,e.resultCountDirective=o,e.loadingDirective=n,e.noResultsDirective=l}(e.Directives||(e.Directives={}));e.Directives}(DegreeSearch||(DegreeSearch={}));var DegreeSearch;!function(e){!function(e){function t(){return function(e){return $("<span>").html(e).text()}}e.convertEncoding=t}(e.Filters||(e.Filters={}));e.Filters}(DegreeSearch||(DegreeSearch={}));var app=angular.module("DegreeSearchApp",[]).config(["$locationProvider",function(e){e.html5Mode(!0)}]);angular.module("DegreeSearchApp").controller("MainController",DegreeSearch.Controllers.MainController),angular.module("DegreeSearchApp").controller("ProgramController",DegreeSearch.Controllers.ProgramController),angular.module("DegreeSearchApp").controller("CollegeController",DegreeSearch.Controllers.CollegeController),angular.module("DegreeSearchApp").service("DegreeService",DegreeSearch.Services.DegreeService),angular.module("DegreeSearchApp").directive("searchForm",DegreeSearch.Directives.searchFormDirective),angular.module("DegreeSearchApp").directive("searchResults",DegreeSearch.Directives.searchResultsDirective),angular.module("DegreeSearchApp").directive("programTypeFilters",DegreeSearch.Directives.programTypesDirective),angular.module("DegreeSearchApp").directive("collegeFilters",DegreeSearch.Directives.collegesDirective),angular.module("DegreeSearchApp").directive("pagination",DegreeSearch.Directives.paginationDirective),angular.module("DegreeSearchApp").directive("resultCount",DegreeSearch.Directives.resultCountDirective),angular.module("DegreeSearchApp").directive("loading",DegreeSearch.Directives.loadingDirective),angular.module("DegreeSearchApp").directive("noResults",DegreeSearch.Directives.noResultsDirective),angular.module("DegreeSearchApp").filter("convertEncoding",DegreeSearch.Filters.convertEncoding);
//# sourceMappingURL=ucf-degree-search-angular.min.js.map
