var DegreeSearch;!function(e){!function(e){var t=function(){function e(e,t){this.http=e,this.location=t,this.apiUrl=UCF_DEGREE_SEARCH_ANGULAR.remote_path,this.limit=UCF_DEGREE_SEARCH_ANGULAR.limit}return e.prototype.getDegreeResults=function(e,t,r,o){var s={search:e,colleges:t.college,program_types:t.programType,page:t.page?t.page:1,limit:t.limit?t.limit:this.limit};this.http.get(this.apiUrl+"/degrees",{params:s}).then(function(e){r(e)},function(e){o(e)})},e.prototype.getProgramTypes=function(e,t){this.http.get(this.apiUrl+"/program-types").then(function(t){e(t)},function(e){t(e)})},e.prototype.getProgramTypesCounts=function(e,t,r){var o={search:e};this.http.get(this.apiUrl+"/program-types/counts",{params:o}).then(function(e){t(e)},function(e){r(e)})},e.prototype.getColleges=function(e,t){this.http.get(this.apiUrl+"/colleges").then(function(t){e(t)},function(e){t(e)})},e.prototype.getCollegesCounts=function(e,t,r){var o={search:e};this.http.get(this.apiUrl+"/colleges/counts",{params:o}).then(function(e){t(e)},function(e){r(e)})},e.$inject=["$http","$location"],e}();e.DegreeService=t}(e.Services||(e.Services={}));e.Services}(DegreeSearch||(DegreeSearch={}));var DegreeSearch;!function(e){!function(e){var t=function(){function e(e,t,r){var o=this;this.scope=e,this.location=t,this.degreeService=r,this.pages=new Array,this.routeRegExps={college:null,program:null,search:null},this.registerRoute(),this.setDefaults(),this.parsePath(),this.scope.$watch("mainCtl.searchQuery",function(e){o.handleInput(e)})}return e.prototype.getSearchResults=function(){var e=this;this.totalResults=null;var t="all"===this.selectedProgramType?"":this.selectedProgramType,r="all"===this.selectedCollege?"":this.selectedCollege;this.degreeService.getDegreeResults(this.searchQuery,{college:r,page:this.currentPage,programType:t},function(t){e.successHandler(t)},function(t){e.errorHandler(t)})},e.prototype.successHandler=function(e){this.results=e.data,this.totalResults=this.results.totalPosts,this.currentPage=this.results.currentPage,this.totalPages=this.results.totalPages,this.startIndex=this.results.startIndex,this.endIndex=this.results.endIndex,this.buildLocation(),this.pagination()},e.prototype.errorHandler=function(e){this.results={}},e.prototype.handleInput=function(e){this.searchQuery=e,this.currentPage=1,this.buildLocation(),this.getSearchResults()},e.prototype.previousPage=function(){this.currentPage--,this.currentPage<1?this.currentPage=1:this.getSearchResults()},e.prototype.nextPage=function(){this.currentPage++,this.currentPage<=this.totalPages?this.getSearchResults():this.currentPage--},e.prototype.goToPage=function(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.getSearchResults())},e.prototype.registerRoute=function(){this.routeRegExps.search=new RegExp("/search/([\\w\\s]*)/?")},e.prototype.setDefaults=function(){var e=this;UCF_DEGREE_SEARCH_ANGULAR.default_program_type&&(this.selectedProgramType=UCF_DEGREE_SEARCH_ANGULAR.default_program_type),UCF_DEGREE_SEARCH_ANGULAR.default_college&&(this.selectedCollege=UCF_DEGREE_SEARCH_ANGULAR.default_college),UCF_DEGREE_SEARCH_ANGULAR.enabled_routes?(this.enabledRoutes={college:!1,program:!1,search:!1},UCF_DEGREE_SEARCH_ANGULAR.enabled_routes.forEach(function(t){e.enabledRoutes[t]=!0})):this.enabledRoutes={college:!0,program:!0,search:!0}},e.prototype.parsePath=function(){var e=this.location.path();if(this.enabledRoutes.college&&this.routeRegExps.college){var t=this.routeRegExps.college.exec(e);t&&(this.selectedCollege=t[1])}if(this.enabledRoutes.program&&this.routeRegExps.program){var t=this.routeRegExps.program.exec(e);t&&(this.selectedProgramType=t[1])}if(this.enabledRoutes.search&&this.routeRegExps.search){var t=this.routeRegExps.search.exec(e);t&&(this.searchQuery=t[1])}},e.prototype.buildLocation=function(){var e="/";this.selectedCollege&&this.enabledRoutes.college&&(e+="college/"+this.selectedCollege+"/"),this.selectedProgramType&&this.enabledRoutes.program&&(e+=this.selectedProgramType+"/"),this.searchQuery&&this.enabledRoutes.search&&(e+="search/"+this.searchQuery+"/"),this.location.path(e)},e.prototype.pagination=function(){var e=$(document).innerWidth()<768?5:10,t=5===e?3:6,r=this.currentPage<t?1:this.currentPage-t+1,o=this.totalPages<e?this.totalPages:r+e;this.pages=new Array;for(var s=r;s<o;s++)this.pages.push(s)},e.$inject=["$scope","$location","DegreeService"],e}();e.MainController=t}(e.Controllers||(e.Controllers={}));e.Controllers}(DegreeSearch||(DegreeSearch={}));var DegreeSearch;!function(e){!function(e){var t=function(){function e(e,t){this.scope=e,this.degreeService=t,this.mainCtl=this.scope.$parent.mainCtl,this.programTypes=new Array,this.setProgramTypes(!0)}return e.prototype.setProgramTypes=function(e){var t=this;"undefined"==typeof e&&(e=!1),this.degreeService.getProgramTypes(function(r){e&&t.addHandlers(),t.programSuccess(r),t.registerRoutes()},function(e){t.programError(e)})},e.prototype.addHandlers=function(){var e=this;this.scope.$watch("mainCtl.searchQuery",function(t){e.onQueryChange(t)})},e.prototype.registerRoutes=function(){var e=new Array;this.programTypes.forEach(function(t){e.push(t.slug)}),this.mainCtl.routeRegExps.program=new RegExp("/("+e.join("|")+")/?")},e.prototype.programSuccess=function(e){this.programTypes=e.data},e.prototype.programError=function(e){this.programTypes=new Array},e.prototype.onSelected=function(e){this.mainCtl.selectedProgramType=e,this.mainCtl.page=1,this.mainCtl.getSearchResults()},e.prototype.onQueryChange=function(e){var t=this;e?this.degreeService.getProgramTypesCounts(e,function(e){t.updateCounts(e)},function(e){t.programTypes.forEach(function(e){e.count=null})}):this.setProgramTypes()},e.prototype.updateCounts=function(e){var t=e.data;this.programTypes.forEach(function(e){"undefined"!=typeof t[e.slug]?e.count=t[e.slug]:e.count=0})},e.$inject=["$scope","DegreeService"],e}();e.ProgramController=t}(e.Controllers||(e.Controllers={}));e.Controllers}(DegreeSearch||(DegreeSearch={}));var DegreeSearch;!function(e){!function(e){var t=function(){function e(e,t){this.scope=e,this.degreeService=t,this.mainCtl=this.scope.$parent.mainCtl,this.colleges=new Array,this.setColleges(!0)}return e.prototype.setColleges=function(e){var t=this;"undefined"==typeof e&&(e=!1),this.degreeService.getColleges(function(r){e&&t.addHandlers(),t.collegeSuccess(r),t.registerRoutes()},function(e){t.collegeError(e)})},e.prototype.addHandlers=function(){var e=this;this.scope.$watch("mainCtl.searchQuery",function(t){e.onQueryChange(t)})},e.prototype.registerRoutes=function(){this.mainCtl.routeRegExps.college=new RegExp("/college/([a-zA-Z-_]*)/?")},e.prototype.collegeSuccess=function(e){this.colleges=e.data},e.prototype.collegeError=function(e){this.colleges=new Array},e.prototype.onSelected=function(e){this.mainCtl.selectedCollege=e,this.mainCtl.page=1,this.mainCtl.getSearchResults()},e.prototype.onQueryChange=function(e){var t=this;e?this.degreeService.getCollegesCounts(e,function(e){t.updateCounts(e)},function(e){t.colleges.forEach(function(e){e.count=null})}):this.setColleges()},e.prototype.updateCounts=function(e){var t=e.data;this.colleges.forEach(function(e){"undefined"!=typeof t[e.slug]?e.count=t[e.slug]:e.count=0})},e.$inject=["$scope","DegreeService"],e}();e.CollegeController=t}(e.Controllers||(e.Controllers={}));e.Controllers}(DegreeSearch||(DegreeSearch={}));var DegreeSearch;!function(e){!function(e){function t(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.search_form_template}}function r(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.search_results_template}}function o(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.program_types_template}}function s(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.colleges_template}}function i(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.pagination_template}}function n(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.result_count_template}}function a(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.loading_template}}function c(){return{restrict:"E",replace:!0,template:UCF_DEGREE_SEARCH_ANGULAR.no_results_template}}e.searchFormDirective=t,e.searchResultsDirective=r,e.programTypesDirective=o,e.collegesDirective=s,e.paginationDirective=i,e.resultCountDirective=n,e.loadingDirective=a,e.noResultsDirective=c}(e.Directives||(e.Directives={}));e.Directives}(DegreeSearch||(DegreeSearch={})),angular.module("DegreeSearchApp",[]),angular.module("DegreeSearchApp").controller("MainController",DegreeSearch.Controllers.MainController),angular.module("DegreeSearchApp").controller("ProgramController",DegreeSearch.Controllers.ProgramController),angular.module("DegreeSearchApp").controller("CollegeController",DegreeSearch.Controllers.CollegeController),angular.module("DegreeSearchApp").service("DegreeService",DegreeSearch.Services.DegreeService),angular.module("DegreeSearchApp").directive("searchForm",DegreeSearch.Directives.searchFormDirective),angular.module("DegreeSearchApp").directive("searchResults",DegreeSearch.Directives.searchResultsDirective),angular.module("DegreeSearchApp").directive("programTypeFilters",DegreeSearch.Directives.programTypesDirective),angular.module("DegreeSearchApp").directive("collegeFilters",DegreeSearch.Directives.collegesDirective),angular.module("DegreeSearchApp").directive("pagination",DegreeSearch.Directives.paginationDirective),angular.module("DegreeSearchApp").directive("resultCount",DegreeSearch.Directives.resultCountDirective),angular.module("DegreeSearchApp").directive("loading",DegreeSearch.Directives.loadingDirective),angular.module("DegreeSearchApp").directive("noResults",DegreeSearch.Directives.noResultsDirective);
//# sourceMappingURL=ucf-degree-search-angular.min.js.map
