var UCFDegreeSearch=function UCFDegreeSearch(a){this.defaultIdentify=function(a){return a.id},this.defaultTransform=function(a){return a},this.defaultDisplayKey=function(a){return jQuery("<span>").html(a.title.rendered).text()},this.defaultQueryTokenizer=function(a){return Bloodhound.tokenizers.whitespace(a)},this.defaultDatumTokenizer=function(a){return Bloodhound.tokenizers.whitespace(a.title.rendered)},this.defaultOnSelect=function(a,b){window.location=b.link},this.$object=a.selector?a.selector:$(".degree-search-typeahead"),this.query_params=this.$object.data("degree-search-params")?this.$object.data("degree-search-params"):UCF_DEGREE_SEARCH.query_params;// Defaults object
var b={limit:this.$object.data("degree-search-count")?this.$object.data("degree-search-count"):UCF_DEGREE_SEARCH.num_results,transform:this.defaultTransform,prepare:null,identify:this.defaultIdentify,displayKey:this.defaultDisplayKey,empty:UCF_DEGREE_SEARCH.empty,suggestion:UCF_DEGREE_SEARCH.suggestion,footer:UCF_DEGREE_SEARCH.footer,queryTokenizer:this.defaultQueryTokenizer,datumTokenizer:this.defaultDatumTokenizer,onSelect:this.defaultOnSelect};// Make sure args is an object
for(var c in a=a?a:{},b)("undefined"==typeof a[c]||null===a[c])&&(a[c]=b[c]);this.transform=a.transform,this.prepare=a.prepare,this.limit=a.limit,this.identify=a.identify,this.displayKey=a.displayKey,this.empty=a.empty,this.suggestion=a.suggestion,this.footer=a.footer,this.queryTokenizer=a.queryTokenizer,this.datumTokenizer=a.datumTokenizer,this.onSelect=a.onSelect,this.engine=new Bloodhound({remote:{url:UCF_DEGREE_SEARCH.remote_path+this.query_params,transform:this.transform,prepare:this.prepare,wildcard:"%q"},queryTokenizer:this.queryTokenizer,datumTokenizer:this.datumTokenizer,identify:this.identify}),this.$object.typeahead({minLength:3,highlight:!0},{name:"degree-search-terms",limit:this.limit,displayKey:this.displayKey,source:this.engine.ttAdapter(),templates:{notFound:this.empty?Handlebars.compile(this.empty):null,suggestion:this.suggestion?Handlebars.compile(this.suggestion):null,footer:this.footer?Handlebars.compile(this.footer):null}}).on("typeahead:selected",function(a,b){window.location=b.link}).on("typeahead:asyncreceive",function(){jQuery(".tt-menu").scrollTop(0)})};(function(a){$objects=a(".degree-search-typeahead[data-degree-search-init]"),0<$objects.length&&$objects.each(function(a){new UCFDegreeSearch({selector:a})})})(jQuery);
