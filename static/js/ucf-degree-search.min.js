var datumTokenizer=function(e){return Bloodhound.tokenizers.whitespace(e.title.rendered)},identifyById=function(e){return e.id},scoreSorter=function(e,r){return e.score<r.score?1:e.score>r.score?-1:0},addMeta=function(e){var r=$(".tt-input").val().toLowerCase(),t=new RegExp("\\b"+r+"\\b","i"),n=new RegExp(r,"i");for(var a in e){var o=e[a],i=0,d="",c=null!==t.exec(o.title.rendered),u=null!==n.exec(o.title.rendered);i+=c?50:0,i+=u&&!c?10:0;for(var l in o.program_types){var s=o.program_types[l],p=null!==t.exec(s.name),m=null!==n.exec(s.name);i+=p?25:0,i+=m&&!p?10:0,(p||m)&&(d="(Program Type: "+s.name+")")}for(var E in o.career_paths){var f=o.career_paths[E],h=null!==t.exec(f.name),y=null!==n.exec(f.name);(h||y)&&(d="(Career Opportunity: "+f.name+")")}o.score=i,o.matchString=d}return e.sort(scoreSorter),e},ucfDegreeSearch=function(e){var r=new Bloodhound({prefetch:{url:UCF_DEGREE_SEARCH.remote_path+"?filters[posts_per_page]=-1",transform:addMeta},remote:{url:UCF_DEGREE_SEARCH.remote_path+UCF_DEGREE_SEARCH.query_params,transform:addMeta,wildcard:"%q"},queryTokenizer:Bloodhound.tokenizers.whitespace,datumTokenizer:datumTokenizer,identify:identifyById});e(".degree-search-typeahead").typeahead({minLength:3,highlight:!0},{name:"terms",displayKey:function(e){return e.title.rendered},source:r.ttAdapter(),templates:{empty:Handlebars.compile(UCF_DEGREE_SEARCH.empty||""),suggestion:Handlebars.compile(UCF_DEGREE_SEARCH.suggestion||""),footer:Handlebars.compile(UCF_DEGREE_SEARCH.footer||"")}}).on("typeahead:selected",function(e,r){window.location=r.link})};"undefined"!==jQuery&&jQuery(document).ready(function(e){ucfDegreeSearch(e)});